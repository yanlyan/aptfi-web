(self.webpackChunkaptfi=self.webpackChunkaptfi||[]).push([[461],{8461:(t,e,a)=>{"use strict";a.r(e),a.d(e,{PengurusTagihanModule:()=>nt});var n=a(8583),i=a(3962),s=a(1494),l=a(2789),o=a(6682),r=a(2759),u=a(7519),c=a(4395),p=a(9761),m=a(3190),f=a(8002),g=a(9989),d=a(7716),h=a(250),Z=a(6633),x=a(8645),y=a(8909),_=a(5893),w=a(5618),T=a(8295),v=a(9983),A=a(7441),U=a(2458),q=a(4885),S=a(1095);const b=["matSelect"],C=["filterInput"];function N(t,e){1&t&&(d.TgZ(0,"mat-header-cell"),d._uU(1,"No."),d.qZA())}function I(t,e){if(1&t&&(d.TgZ(0,"mat-cell"),d.TgZ(1,"span",22),d._uU(2,"No:"),d.qZA(),d._uU(3),d.qZA()),2&t){const t=e.$implicit;d.xp6(3),d.hij(" ",t.index," ")}}function Y(t,e){1&t&&(d.TgZ(0,"mat-header-cell",23),d._uU(1,"Nama Institusi"),d.qZA())}function Q(t,e){if(1&t&&(d.TgZ(0,"mat-cell"),d._UZ(1,"span",22),d._uU(2),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.hij(" ",t.universityName,"")}}function J(t,e){1&t&&(d.TgZ(0,"mat-header-cell"),d._uU(1,"Jenis Tagihan"),d.qZA())}function k(t,e){1&t&&(d.TgZ(0,"span"),d._uU(1,"Pendaftaran"),d.qZA())}function D(t,e){if(1&t&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(1),d.hij("Iuran Tahun ",t.year,"")}}function B(t,e){if(1&t&&(d.TgZ(0,"mat-cell"),d._UZ(1,"span",22),d.YNc(2,k,2,0,"span",24),d.YNc(3,D,2,1,"span",24),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngIf","register"===t.type),d.xp6(1),d.Q6J("ngIf","annual"===t.type)}}function M(t,e){1&t&&(d.TgZ(0,"mat-header-cell"),d._uU(1,"Nominal"),d.qZA())}function L(t,e){if(1&t&&(d.TgZ(0,"mat-cell"),d._UZ(1,"span",22),d._uU(2),d.ALo(3,"number"),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.hij(" Rp. ",d.lcZ(3,1,t.amount+t.fee)," ")}}function P(t,e){1&t&&(d.TgZ(0,"mat-header-cell"),d._uU(1,"Status"),d.qZA())}function z(t,e){1&t&&(d.TgZ(0,"span",29),d._uU(1,"Belum Bayar"),d.qZA())}function O(t,e){1&t&&(d.TgZ(0,"span",30),d._uU(1,"Menunggu Pembayaran"),d.qZA())}function G(t,e){1&t&&(d.TgZ(0,"span",31),d._uU(1,"Lunas"),d.qZA())}function $(t,e){1&t&&(d.TgZ(0,"span",32),d._uU(1,"Kadaluarsa"),d.qZA())}function H(t,e){if(1&t&&(d.TgZ(0,"mat-cell"),d._UZ(1,"span",22),d.YNc(2,z,2,0,"span",25),d.YNc(3,O,2,0,"span",26),d.YNc(4,G,2,0,"span",27),d.YNc(5,$,2,0,"span",28),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngIf",0===t.lastStatus),d.xp6(1),d.Q6J("ngIf",1===t.lastStatus),d.xp6(1),d.Q6J("ngIf",2===t.lastStatus),d.xp6(1),d.Q6J("ngIf",3===t.lastStatus)}}function R(t,e){1&t&&(d.TgZ(0,"mat-header-cell"),d._uU(1,"Bukti Bayar"),d.qZA())}function E(t,e){1&t&&(d.TgZ(0,"div",35),d._UZ(1,"mat-spinner",36),d.TgZ(2,"label",37),d._uU(3,"Loading"),d.qZA(),d.qZA()),2&t&&(d.xp6(1),d.Q6J("diameter",20))}function F(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"button",38),d.NdJ("click",function(){d.CHM(t);const e=d.oxw().$implicit;return d.oxw().download(e)}),d._uU(1," Lihat "),d.qZA()}if(2&t){const t=d.oxw().$implicit;d.Q6J("disabled",2!==t.lastStatus)}}function j(t,e){if(1&t&&(d.TgZ(0,"mat-cell"),d._UZ(1,"span",22),d.YNc(2,E,4,1,"div",33),d.YNc(3,F,2,1,"button",34),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngIf",t.loading),d.xp6(1),d.Q6J("ngIf",!t.loading)}}function W(t,e){1&t&&d._UZ(0,"mat-header-row")}function X(t,e){1&t&&d._UZ(0,"mat-row")}const K=function(){return[5,10,20]};let V=(()=>{class t{constructor(t,e,a,n,i,s,o){this.cdref=t,this.pengurusTagihanService=e,this.tagihanService=a,this.store=n,this.route=i,this._FileSaverService=s,this.datepipe=o,this.displayedColumns=["index","members.university_name","type","amount","last_status","receipt"],this.dataSource=new l.by,this.store.dispatch(new g.z(!0))}ngOnInit(){this.paginator.pageIndex=this.route.snapshot.queryParams.page||0,this.paginator.pageSize=this.route.snapshot.queryParams.size||10,this.paginator.page.next()}ngAfterViewInit(){this.statusSelect.value=this.route.snapshot.queryParams.status||"",this.filterInput.nativeElement.value=this.route.snapshot.queryParams.search||"",this.sort.sort({id:"id",start:"asc",disableClear:!1}),this.cdref.detectChanges(),(0,o.T)(this.sort.sortChange,this.paginator.page,(0,r.R)(this.filterInput.nativeElement,"keyup"),this.statusSelect.valueChange).pipe((0,u.x)(),(0,c.b)(500),(0,p.O)({}),(0,m.w)(()=>(this.store.dispatch(new g.z(!0)),this.loadData()))).subscribe()}loadData(){return this.pengurusTagihanService.getAllBills(this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction,this.filterInput.nativeElement.value,this.statusSelect.value,"false").pipe((0,f.U)(t=>(this.resultsLength=t.pagination.length,t.data)),(0,f.U)(t=>{setTimeout(()=>{this.filterInput.nativeElement.focus()},500),this.dataSource.data=t.map((t,e)=>(t.index=this.paginator.pageIndex>0?e+this.paginator.pageIndex*this.paginator.pageSize+1:e+1,t)),this.store.dispatch(new g.z(!1))}))}download(t){t.loading=!0,this.tagihanService.print(t.token).subscribe(e=>{this._FileSaverService.save(e,`Bukti Pembayaran ${t.universityName} ${this.datepipe.transform(t.lastStatusAt,"d MMMM y")} .pdf`,"pdf"),t.loading=!1},e=>{t.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(d.sBO),d.Y36(h.u),d.Y36(Z.F),d.Y36(x.yh),d.Y36(y.gz),d.Y36(_.m9),d.Y36(n.uU))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-pengurus-tagihan"]],viewQuery:function(t,e){if(1&t&&(d.Gf(i.NW,7),d.Gf(s.YE,5),d.Gf(b,5),d.Gf(C,7)),2&t){let t;d.iGM(t=d.CRH())&&(e.paginator=t.first),d.iGM(t=d.CRH())&&(e.sort=t.first),d.iGM(t=d.CRH())&&(e.statusSelect=t.first),d.iGM(t=d.CRH())&&(e.filterInput=t.first)}},decls:42,vars:11,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","32px"],["fxFlex","70%"],["matInput",""],["filterInput",""],["fxFlex","25%"],["placeholder","Status Pembayaran","name","status"],["matSelect",""],[3,"value"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","index"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","members.university_name"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","amount"],["matColumnDef","last_status"],["matColumnDef","receipt"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length"],[1,"mobile-label"],["mat-sort-header",""],[4,"ngIf"],["class","pills",4,"ngIf"],["class","pills yellow",4,"ngIf"],["class","pills success",4,"ngIf"],["class","pills warn",4,"ngIf"],[1,"pills"],[1,"pills","yellow"],[1,"pills","success"],[1,"pills","warn"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px"],["color","accent",3,"diameter"],["for",""],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"mat-form-field",1),d.TgZ(2,"mat-label"),d._uU(3,"Cari"),d.qZA(),d._UZ(4,"input",2,3),d.qZA(),d.TgZ(6,"mat-form-field",4),d.TgZ(7,"mat-select",5,6),d.TgZ(9,"mat-option",7),d._uU(10,"Tampilkan Semua"),d.qZA(),d.TgZ(11,"mat-option",7),d._uU(12,"Belum Bayar"),d.qZA(),d.TgZ(13,"mat-option",7),d._uU(14,"Menunggu Pembayaran"),d.qZA(),d.TgZ(15,"mat-option",7),d._uU(16,"Lunas"),d.qZA(),d.TgZ(17,"mat-option",7),d._uU(18,"Kadaluarsa"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(19,"div",8),d.TgZ(20,"mat-table",9),d.ynx(21,10),d.YNc(22,N,2,0,"mat-header-cell",11),d.YNc(23,I,4,1,"mat-cell",12),d.BQk(),d.ynx(24,13),d.YNc(25,Y,2,0,"mat-header-cell",14),d.YNc(26,Q,3,1,"mat-cell",12),d.BQk(),d.ynx(27,15),d.YNc(28,J,2,0,"mat-header-cell",11),d.YNc(29,B,4,2,"mat-cell",12),d.BQk(),d.ynx(30,16),d.YNc(31,M,2,0,"mat-header-cell",11),d.YNc(32,L,4,3,"mat-cell",12),d.BQk(),d.ynx(33,17),d.YNc(34,P,2,0,"mat-header-cell",11),d.YNc(35,H,6,4,"mat-cell",12),d.BQk(),d.ynx(36,18),d.YNc(37,R,2,0,"mat-header-cell",11),d.YNc(38,j,4,2,"mat-cell",12),d.BQk(),d.YNc(39,W,1,0,"mat-header-row",19),d.YNc(40,X,1,0,"mat-row",20),d.qZA(),d._UZ(41,"mat-paginator",21),d.qZA()),2&t&&(d.xp6(9),d.Q6J("value",""),d.xp6(2),d.Q6J("value",0),d.xp6(2),d.Q6J("value",1),d.xp6(2),d.Q6J("value",2),d.xp6(2),d.Q6J("value",3),d.xp6(3),d.Q6J("dataSource",e.dataSource),d.xp6(19),d.Q6J("matHeaderRowDef",e.displayedColumns),d.xp6(1),d.Q6J("matRowDefColumns",e.displayedColumns),d.xp6(1),d.Q6J("pageSizeOptions",d.DdM(10,K))("length",e.resultsLength))},directives:[w.xw,w.Wh,w.SQ,T.KE,w.yH,T.hX,v.Nt,A.gD,U.ey,l.BZ,s.YE,l.w1,l.fO,l.Dz,l.as,l.nj,i.NW,l.ge,l.ev,s.nU,n.O5,q.$g,S.lW,l.XQ,l.Gk],pipes:[n.JJ],styles:[".mobile-label[_ngcontent-%COMP%]{display:none}@media (max-width: 600px){.mobile-label[_ngcontent-%COMP%]{width:80px;display:inline-block;font-weight:700}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{flex-direction:column;align-items:start;padding:8px 24px}}@media (min-width: 600px){.mat-column-index[_ngcontent-%COMP%]{flex:0 0 4%}.mat-column-members-university_name[_ngcontent-%COMP%]{flex:0 0 35%}}"]}),t})();var tt=a(3356),et=a(8341);const at=[{path:"",component:V}];let nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({providers:[n.uU],imports:[[n.ez,y.Bz.forChild(at),i.TU,l.p0,et.Hi,v.c,s.JX,tt.o9,A.LD,S.ot,q.Cq]]}),t})()}}]);