"use strict";(self.webpackChunkaptfi=self.webpackChunkaptfi||[]).push([[711],{8711:(dt,f,i)=>{i.r(f),i.d(f,{RekapTagihanModule:()=>ut});var m=i(9808),r=i(9062),p=i(4847),s=i(4999),C=i(6451),y=i(4968),R=i(1884),A=i(8372),U=i(8675),S=i(3900),h=i(4004),u=i(9989),t=i(5e3),N=i(250),k=i(6633),I=i(6661),d=i(8774),Y=i(1463),c=i(7093),T=i(7322),_=i(7531),x=i(4107),Q=i(508),Z=i(773),v=i(7423);const J=["matSelect"],M=["filterInput"];function w(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"No."),t.qZA())}function D(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t.TgZ(1,"span",23),t._uU(2,"No:"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=n.$implicit;t.xp6(3),t.hij(" ",e.index," ")}}function B(a,n){1&a&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Nama Institusi"),t.qZA())}function L(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",23),t._uU(2),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.hij(" ",e.universityName,"")}}function q(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Jenis Tagihan"),t.qZA())}function $(a,n){1&a&&(t.TgZ(0,"span"),t._uU(1,"Pendaftaran"),t.qZA())}function P(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij("Iuran Tahun ",e.year,"")}}function b(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",23),t.YNc(2,$,2,0,"span",25),t.YNc(3,P,2,1,"span",25),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf","register"===e.type),t.xp6(1),t.Q6J("ngIf","annual"===e.type)}}function z(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Nominal"),t.qZA())}function O(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",23),t._uU(2),t.ALo(3,"number"),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.hij(" Rp. ",t.lcZ(3,1,e.amount+e.fee)," ")}}function G(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Status"),t.qZA())}function H(a,n){1&a&&(t.TgZ(0,"span",30),t._uU(1,"Belum Bayar"),t.qZA())}function F(a,n){1&a&&(t.TgZ(0,"span",31),t._uU(1,"Menunggu Pembayaran"),t.qZA())}function E(a,n){1&a&&(t.TgZ(0,"span",32),t._uU(1,"Lunas"),t.qZA())}function j(a,n){1&a&&(t.TgZ(0,"span",33),t._uU(1,"Kadaluarsa"),t.qZA())}function W(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",23),t.YNc(2,H,2,0,"span",26),t.YNc(3,F,2,0,"span",27),t.YNc(4,E,2,0,"span",28),t.YNc(5,j,2,0,"span",29),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",0===e.lastStatus),t.xp6(1),t.Q6J("ngIf",1===e.lastStatus),t.xp6(1),t.Q6J("ngIf",2===e.lastStatus),t.xp6(1),t.Q6J("ngIf",3===e.lastStatus)}}function X(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Tagihan"),t.qZA())}function K(a,n){1&a&&(t.TgZ(0,"div",36),t._UZ(1,"mat-spinner",37),t.TgZ(2,"label",38),t._uU(3,"Loading"),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("diameter",20))}function V(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().downloadInvoice(o)}),t._uU(1," Lihat "),t.qZA()}}function tt(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",23),t.YNc(2,K,4,1,"div",34),t.YNc(3,V,2,0,"button",35),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function at(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Bukti Bayar"),t.qZA())}function et(a,n){1&a&&(t.TgZ(0,"div",36),t._UZ(1,"mat-spinner",37),t.TgZ(2,"label",38),t._uU(3,"Loading"),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("diameter",20))}function nt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().downloadReceipt(o)}),t._uU(1," Lihat "),t.qZA()}if(2&a){const e=t.oxw().$implicit;t.Q6J("disabled",2!==e.lastStatus)}}function it(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",23),t.YNc(2,et,4,1,"div",34),t.YNc(3,nt,2,1,"button",40),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function lt(a,n){1&a&&t._UZ(0,"mat-header-row")}function ot(a,n){1&a&&t._UZ(0,"mat-row")}const st=function(){return[5,10,20]};let mt=(()=>{class a{constructor(e,l,o,g,gt,ft,ht){this.cdref=e,this.pengurusTagihanService=l,this.tagihanService=o,this.store=g,this.route=gt,this._FileSaverService=ft,this.datepipe=ht,this.displayedColumns=["index","members.university_name","type","amount","last_status","invoice","receipt"],this.dataSource=new s.by,this.store.dispatch(new u.z(!0))}ngOnInit(){this.paginator.pageIndex=this.route.snapshot.queryParams.page||0,this.paginator.pageSize=this.route.snapshot.queryParams.size||10,this.paginator.page.next(null)}ngAfterViewInit(){this.statusSelect.value=this.route.snapshot.queryParams.status||"",this.filterInput.nativeElement.value=this.route.snapshot.queryParams.search||"",this.sort.sort({id:"id",start:"asc",disableClear:!1}),this.cdref.detectChanges(),(0,C.T)(this.sort.sortChange,this.paginator.page,(0,y.R)(this.filterInput.nativeElement,"keyup"),this.statusSelect.valueChange).pipe((0,R.x)(),(0,A.b)(500),(0,U.O)({}),(0,S.w)(()=>(this.store.dispatch(new u.z(!0)),this.loadData()))).subscribe()}loadData(){return this.pengurusTagihanService.getAllBills(this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction,this.filterInput.nativeElement.value,this.statusSelect.value,"true").pipe((0,h.U)(e=>(this.resultsLength=e.pagination.length,e.data)),(0,h.U)(e=>{setTimeout(()=>{this.filterInput.nativeElement.focus()},500),this.dataSource.data=e.map((l,o)=>(l.index=this.paginator.pageIndex>0?o+this.paginator.pageIndex*this.paginator.pageSize+1:o+1,l)),this.store.dispatch(new u.z(!1))}))}downloadInvoice(e){e.loading=!0,this.tagihanService.printInvoice(e.token).subscribe(l=>{this._FileSaverService.save(l,`Tagihan ${e.universityName} ${this.datepipe.transform(e.lastStatusAt,"d MMMM y")} .pdf`,"pdf"),e.loading=!1},l=>{e.loading=!1})}downloadReceipt(e){e.loading=!0,this.tagihanService.printReceipt(e.token).subscribe(l=>{this._FileSaverService.save(l,`Bukti Pembayaran ${e.universityName} ${this.datepipe.transform(e.lastStatusAt,"d MMMM y")} .pdf`,"pdf"),e.loading=!1},l=>{e.loading=!1})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.sBO),t.Y36(N.u),t.Y36(k.F),t.Y36(I.yh),t.Y36(d.gz),t.Y36(Y.m9),t.Y36(m.uU))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-rekap-tagihan"]],viewQuery:function(e,l){if(1&e&&(t.Gf(r.NW,7),t.Gf(p.YE,5),t.Gf(J,5),t.Gf(M,7)),2&e){let o;t.iGM(o=t.CRH())&&(l.paginator=o.first),t.iGM(o=t.CRH())&&(l.sort=o.first),t.iGM(o=t.CRH())&&(l.statusSelect=o.first),t.iGM(o=t.CRH())&&(l.filterInput=o.first)}},decls:45,vars:11,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","32px"],["fxFlex","70%"],["matInput",""],["filterInput",""],["fxFlex","25%"],["placeholder","Status Pembayaran","name","status"],["matSelect",""],[3,"value"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","index"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","members.university_name"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","amount"],["matColumnDef","last_status"],["matColumnDef","invoice"],["matColumnDef","receipt"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length"],[1,"mobile-label"],["mat-sort-header",""],[4,"ngIf"],["class","pills",4,"ngIf"],["class","pills yellow",4,"ngIf"],["class","pills success",4,"ngIf"],["class","pills warn",4,"ngIf"],[1,"pills"],[1,"pills","yellow"],[1,"pills","success"],[1,"pills","warn"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px",4,"ngIf"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px"],["color","accent",3,"diameter"],["for",""],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(e,l){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-form-field",1),t.TgZ(2,"mat-label"),t._uU(3,"Cari"),t.qZA(),t._UZ(4,"input",2,3),t.qZA(),t.TgZ(6,"mat-form-field",4),t.TgZ(7,"mat-select",5,6),t.TgZ(9,"mat-option",7),t._uU(10,"Tampilkan Semua"),t.qZA(),t.TgZ(11,"mat-option",7),t._uU(12,"Belum Bayar"),t.qZA(),t.TgZ(13,"mat-option",7),t._uU(14,"Menunggu Pembayaran"),t.qZA(),t.TgZ(15,"mat-option",7),t._uU(16,"Lunas"),t.qZA(),t.TgZ(17,"mat-option",7),t._uU(18,"Kadaluarsa"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",8),t.TgZ(20,"mat-table",9),t.ynx(21,10),t.YNc(22,w,2,0,"mat-header-cell",11),t.YNc(23,D,4,1,"mat-cell",12),t.BQk(),t.ynx(24,13),t.YNc(25,B,2,0,"mat-header-cell",14),t.YNc(26,L,3,1,"mat-cell",12),t.BQk(),t.ynx(27,15),t.YNc(28,q,2,0,"mat-header-cell",11),t.YNc(29,b,4,2,"mat-cell",12),t.BQk(),t.ynx(30,16),t.YNc(31,z,2,0,"mat-header-cell",11),t.YNc(32,O,4,3,"mat-cell",12),t.BQk(),t.ynx(33,17),t.YNc(34,G,2,0,"mat-header-cell",11),t.YNc(35,W,6,4,"mat-cell",12),t.BQk(),t.ynx(36,18),t.YNc(37,X,2,0,"mat-header-cell",11),t.YNc(38,tt,4,2,"mat-cell",12),t.BQk(),t.ynx(39,19),t.YNc(40,at,2,0,"mat-header-cell",11),t.YNc(41,it,4,2,"mat-cell",12),t.BQk(),t.YNc(42,lt,1,0,"mat-header-row",20),t.YNc(43,ot,1,0,"mat-row",21),t.qZA(),t._UZ(44,"mat-paginator",22),t.qZA()),2&e&&(t.xp6(9),t.Q6J("value",""),t.xp6(2),t.Q6J("value",0),t.xp6(2),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(3),t.Q6J("dataSource",l.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",l.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(10,st))("length",l.resultsLength))},directives:[c.xw,c.Wh,c.SQ,T.KE,c.yH,T.hX,_.Nt,x.gD,Q.ey,s.BZ,p.YE,s.w1,s.fO,s.Dz,s.as,s.nj,r.NW,s.ge,s.ev,p.nU,m.O5,Z.$g,v.lW,s.XQ,s.Gk],pipes:[m.JJ],styles:[".mobile-label[_ngcontent-%COMP%]{display:none}@media (max-width: 600px){.mobile-label[_ngcontent-%COMP%]{width:80px;display:inline-block;font-weight:700}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{flex-direction:column;align-items:start;padding:8px 24px}}@media (min-width: 600px){.mat-column-index[_ngcontent-%COMP%]{flex:0 0 4%}.mat-column-members-university_name[_ngcontent-%COMP%]{flex:0 0 35%}}"]}),a})();var pt=i(9764),ct=i(6688);const rt=[{path:"",component:mt}];let ut=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[m.uU],imports:[[m.ez,d.Bz.forChild(rt),r.TU,s.p0,ct.Hi,_.c,p.JX,pt.o9,x.LD,v.ot,Z.Cq]]}),a})()}}]);