"use strict";(self.webpackChunkaptfi=self.webpackChunkaptfi||[]).push([[560],{1560:(O,d,i)=>{i.r(d),i.d(d,{TagihanModule:()=>w});var l=i(9808),_=i(8746),m=i(9989),t=i(5e3),Z=i(6633),T=i(7261),h=i(1463),y=i(6661),s=i(7093),c=i(9224),p=i(4834),f=i(5245),x=i(773),u=i(7423);function A(n,o){if(1&n&&(t.TgZ(0,"mat-card-title"),t._uU(1),t.qZA()),2&n){const a=t.oxw().$implicit;t.xp6(1),t.hij("Iuran Anggota Tahun ",a.year,"")}}function v(n,o){1&n&&(t.TgZ(0,"mat-card-title"),t._uU(1,"Biaya Pendaftaran Anggota"),t.qZA())}function b(n,o){1&n&&(t.TgZ(0,"div",18),t.TgZ(1,"mat-icon",19),t._uU(2,"fiber_manual_record"),t.qZA(),t.TgZ(3,"label",9),t._uU(4,"Belum dibayar"),t.qZA(),t.qZA())}function C(n,o){1&n&&(t.TgZ(0,"div",18),t.TgZ(1,"mat-icon",20),t._uU(2,"fiber_manual_record"),t.qZA(),t.TgZ(3,"label",9),t._uU(4,"Menunggu pembayaran"),t.qZA(),t.qZA())}function L(n,o){1&n&&(t.TgZ(0,"div",18),t.TgZ(1,"mat-icon",21),t._uU(2,"fiber_manual_record"),t.qZA(),t.TgZ(3,"label",9),t._uU(4,"Lunas"),t.qZA(),t.qZA())}function U(n,o){1&n&&(t.TgZ(0,"div",18),t.TgZ(1,"mat-icon",22),t._uU(2,"fiber_manual_record"),t.qZA(),t.TgZ(3,"label",9),t._uU(4,"Pembayaran Kadaluarsa"),t.qZA(),t.qZA())}function q(n,o){1&n&&(t.TgZ(0,"label",13),t._uU(1,"Pendaftaran Anggota"),t.qZA())}function k(n,o){if(1&n&&(t.TgZ(0,"label",13),t._uU(1),t.qZA()),2&n){const a=t.oxw().$implicit;t.xp6(1),t.hij("Iuran Tahunan (",a.year,")")}}function I(n,o){1&n&&(t.TgZ(0,"div",23),t._UZ(1,"mat-spinner",24),t.TgZ(2,"label",9),t._uU(3,"Loading"),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",20))}function S(n,o){if(1&n){const a=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(a);const r=t.oxw().$implicit;return t.oxw().onPayButtonClick(r)}),t.TgZ(1,"mat-icon"),t._uU(2,"credit_card"),t.qZA(),t._uU(3," Bayar Sekarang "),t.qZA()}}function J(n,o){if(1&n){const a=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(a);const r=t.oxw().$implicit;return t.oxw().onRetryClick(r)}),t.TgZ(1,"mat-icon"),t._uU(2,"credit_card"),t.qZA(),t._uU(3," Bayar Sekarang "),t.qZA()}}function N(n,o){if(1&n){const a=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(a);const r=t.oxw().$implicit;return t.oxw().onPrintClick(r)}),t.TgZ(1,"mat-icon"),t._uU(2,"receipt"),t.qZA(),t._uU(3," Cetak Bukti Bayar "),t.qZA()}}function B(n,o){if(1&n){const a=t.EpF();t.TgZ(0,"a",26),t.NdJ("click",function(){t.CHM(a);const r=t.oxw().$implicit;return t.oxw().onReorderButtonClick(r)}),t._uU(1," Pesan Ulang "),t.qZA()}}function P(n,o){if(1&n&&(t.TgZ(0,"mat-card",2),t.TgZ(1,"mat-card-header",3),t.YNc(2,A,2,1,"mat-card-title",4),t.YNc(3,v,2,0,"mat-card-title",4),t.qZA(),t.TgZ(4,"mat-card-content"),t.TgZ(5,"div",5),t.YNc(6,b,5,0,"div",6),t.YNc(7,C,5,0,"div",6),t.YNc(8,L,5,0,"div",6),t.YNc(9,U,5,0,"div",6),t.TgZ(10,"div"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.qZA(),t._UZ(13,"mat-divider"),t.TgZ(14,"div",7),t.TgZ(15,"div",8),t.TgZ(16,"label",9),t._uU(17,"ID Transaksi"),t.qZA(),t.TgZ(18,"strong"),t._uU(19),t.qZA(),t.qZA(),t.TgZ(20,"div",10),t.TgZ(21,"strong",11),t._uU(22,"Pembayaran"),t.qZA(),t.YNc(23,q,2,0,"label",12),t.YNc(24,k,2,1,"label",12),t.qZA(),t.TgZ(25,"div",10),t.TgZ(26,"strong",11),t._uU(27,"Nominal"),t.qZA(),t.TgZ(28,"label",13),t._uU(29),t.ALo(30,"number"),t.qZA(),t.qZA(),t.TgZ(31,"div",10),t.TgZ(32,"strong",11),t._uU(33,"Nama Institusi"),t.qZA(),t.TgZ(34,"label",13),t._uU(35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"mat-divider"),t.TgZ(37,"mat-card-actions",14),t.TgZ(38,"div",3),t.YNc(39,I,4,1,"div",15),t.YNc(40,S,4,0,"button",16),t.YNc(41,J,4,0,"button",16),t.YNc(42,N,4,0,"button",16),t.qZA(),t.YNc(43,B,2,0,"a",17),t.qZA(),t.qZA()),2&n){const a=o.$implicit;t.xp6(2),t.Q6J("ngIf","annual"===a.type),t.xp6(1),t.Q6J("ngIf","register"===a.type),t.xp6(3),t.Q6J("ngIf",0===a.lastStatus),t.xp6(1),t.Q6J("ngIf",1===a.lastStatus),t.xp6(1),t.Q6J("ngIf",2===a.lastStatus),t.xp6(1),t.Q6J("ngIf",3===a.lastStatus),t.xp6(2),t.hij(" ",t.xi3(12,17,a.lastStatusAt,"short")," "),t.xp6(8),t.Oqu(a.token.substr(24,12)),t.xp6(4),t.Q6J("ngIf","register"===a.type),t.xp6(1),t.Q6J("ngIf","annual"===a.type),t.xp6(5),t.hij("Rp. ",t.lcZ(30,20,a.amount+a.fee),""),t.xp6(6),t.Oqu(a.member.universityName),t.xp6(4),t.Q6J("ngIf",a.loading),t.xp6(1),t.Q6J("ngIf",0===a.lastStatus||1===a.lastStatus),t.xp6(1),t.Q6J("ngIf",3===a.lastStatus&&!a.loading),t.xp6(1),t.Q6J("ngIf",2===a.lastStatus&&!a.loading),t.xp6(1),t.Q6J("ngIf",0===a.lastStatus)}}let F=(()=>{class n{constructor(a,e,r,g){this.tagihanService=a,this.snackbar=e,this._FileSaverService=r,this.store=g,this.store.dispatch(new m.z(!0)),this.getBills()}ngOnInit(){}getBills(){this.tagihanService.getOrder().pipe((0,_.x)(()=>{this.store.dispatch(new m.z(!1))})).subscribe(a=>{this.bills=a.bills})}onPayButtonClick(a){this.tagihanService.check(a.orderId).subscribe(e=>{this.getBills()}),window.snap.pay(a.token)}onReorderButtonClick(a){a.loading=!0,this.tagihanService.reorder(a.id).subscribe(e=>{this.getBills(),a.loading=!1,this.snackbar.open("Pesan Ulang berhasil, silakan klik Bayar Sekarang",null,{duration:2e3})},e=>{a.loading=!1})}onPrintClick(a){a.loading=!0,this.tagihanService.printReceipt(a.token).subscribe(e=>{this._FileSaverService.save(e,"Bukti Pembayaran.pdf","pdf"),a.loading=!1},e=>{a.loading=!1})}onRetryClick(a){a.loading=!0,this.tagihanService.retry(a.token).subscribe(e=>{window.snap.pay(e.bill.token,{onClose:()=>{this.getBills()}}),a.loading=!1},e=>{a.loading=!1})}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(Z.F),t.Y36(T.ux),t.Y36(h.m9),t.Y36(y.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tagihan"]],decls:3,vars:1,consts:[["fxLayout","row wrap","fxLayoutAlign","start start","fxLayoutGap","16px"],["fxFlex.lg","20%","fxFlex.md","45%","fxFlex.sm","45%","style","margin-top: 8px",4,"ngFor","ngForOf"],["fxFlex.lg","20%","fxFlex.md","45%","fxFlex.sm","45%",2,"margin-top","8px"],["fxLayout","row","fxLayoutAlign","center center"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","8px",2,"padding-bottom","8px"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start stretch",2,"padding","8px"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",2,"padding","8px 0"],["for",""],["fxLayout","column","fxLayoutAlign","start stretch","fxLayoutGap","8px",2,"margin","8px 0"],[2,"color","#ccc","text-transform","uppercase"],["style","font-size: 20px",4,"ngIf"],[2,"font-size","20px"],["fxLayout","column","fxLayoutAlign","center center"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px",4,"ngIf"],["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["mat-flat-button","",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],[2,"color","#ddd"],[2,"color","#ffc957"],[2,"color","#b9ea81"],[2,"color","#ea5455"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px"],["color","primary",3,"diameter"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","",3,"click"]],template:function(a,e){1&a&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.YNc(2,P,44,22,"mat-card",1),t.qZA(),t.qZA()),2&a&&(t.xp6(2),t.Q6J("ngForOf",e.bills))},directives:[s.xw,s.Wh,s.SQ,l.sg,c.a8,s.yH,c.dk,l.O5,c.dn,p.d,c.hq,c.n5,f.Hw,x.$g,u.lW,u.zs],pipes:[l.uU,l.JJ],styles:[".mat-card[_ngcontent-%COMP%]{padding:0}.mat-card-header[_ngcontent-%COMP%]{padding:8px;background-color:#ffca27;border-top-left-radius:5px;border-top-right-radius:5px}.mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{margin-bottom:0;font-size:16px}.mat-card-content[_ngcontent-%COMP%]{padding:8px;margin-bottom:0}.mat-card-actions[_ngcontent-%COMP%]{padding:16px!important}.mat-card[_ngcontent-%COMP%]{margin-top:16px}"]}),n})();var Y=i(8774),Q=i(9764);const M=[{path:"",component:F}];let w=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,Y.Bz.forChild(M),c.QW,u.ot,Q.o9,f.Ps,p.t,x.Cq]]}),n})()}}]);