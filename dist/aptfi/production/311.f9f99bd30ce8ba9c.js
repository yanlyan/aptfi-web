"use strict";(self.webpackChunkaptfi=self.webpackChunkaptfi||[]).push([[311],{3311:(pt,g,i)=>{i.r(g),i.d(g,{PengurusTagihanModule:()=>ut});var u=i(9808),c=i(9062),m=i(4847),o=i(4999),_=i(6451),y=i(4968),P=i(1884),A=i(8372),U=i(8675),S=i(3900),f=i(4004),p=i(9989),t=i(5e3),N=i(250),I=i(6633),Y=i(6661),h=i(8774),Q=i(1463),r=i(7093),d=i(7322),T=i(7531),x=i(4107),J=i(508),Z=i(773),v=i(7423);const M=["matSelect"],D=["filterInput"];function B(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"No."),t.qZA())}function w(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t.TgZ(1,"span",22),t._uU(2,"No:"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=n.$implicit;t.xp6(3),t.hij(" ",e.index," ")}}function L(a,n){1&a&&(t.TgZ(0,"mat-header-cell",23),t._uU(1,"Nama Institusi"),t.qZA())}function z(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",22),t._uU(2),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.hij(" ",e.universityName,"")}}function O(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Jenis Tagihan"),t.qZA())}function G(a,n){1&a&&(t.TgZ(0,"span"),t._uU(1,"Pendaftaran"),t.qZA())}function $(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij("Iuran Tahun ",e.year,"")}}function q(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",22),t.YNc(2,G,2,0,"span",24),t.YNc(3,$,2,1,"span",24),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf","register"===e.type),t.xp6(1),t.Q6J("ngIf","annual"===e.type)}}function H(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Nominal"),t.qZA())}function R(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",22),t._uU(2),t.ALo(3,"number"),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.hij(" Rp. ",t.lcZ(3,1,e.amount+e.fee)," ")}}function b(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Status"),t.qZA())}function E(a,n){1&a&&(t.TgZ(0,"span",29),t._uU(1,"Belum Bayar"),t.qZA())}function F(a,n){1&a&&(t.TgZ(0,"span",30),t._uU(1,"Menunggu Pembayaran"),t.qZA())}function j(a,n){1&a&&(t.TgZ(0,"span",31),t._uU(1,"Lunas"),t.qZA())}function W(a,n){1&a&&(t.TgZ(0,"span",32),t._uU(1,"Kadaluarsa"),t.qZA())}function X(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",22),t.YNc(2,E,2,0,"span",25),t.YNc(3,F,2,0,"span",26),t.YNc(4,j,2,0,"span",27),t.YNc(5,W,2,0,"span",28),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",0===e.lastStatus),t.xp6(1),t.Q6J("ngIf",1===e.lastStatus),t.xp6(1),t.Q6J("ngIf",2===e.lastStatus),t.xp6(1),t.Q6J("ngIf",3===e.lastStatus)}}function K(a,n){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Bukti Bayar"),t.qZA())}function V(a,n){1&a&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner",36),t.TgZ(2,"label",37),t._uU(3,"Loading"),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("diameter",20))}function k(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().download(s)}),t._uU(1," Lihat "),t.qZA()}if(2&a){const e=t.oxw().$implicit;t.Q6J("disabled",2!==e.lastStatus)}}function tt(a,n){if(1&a&&(t.TgZ(0,"mat-cell"),t._UZ(1,"span",22),t.YNc(2,V,4,1,"div",33),t.YNc(3,k,2,1,"button",34),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function at(a,n){1&a&&t._UZ(0,"mat-header-row")}function et(a,n){1&a&&t._UZ(0,"mat-row")}const nt=function(){return[5,10,20]};let it=(()=>{class a{constructor(e,l,s,C,mt,rt,ct){this.cdref=e,this.pengurusTagihanService=l,this.tagihanService=s,this.store=C,this.route=mt,this._FileSaverService=rt,this.datepipe=ct,this.displayedColumns=["index","members.university_name","type","amount","last_status","receipt"],this.dataSource=new o.by,this.store.dispatch(new p.z(!0))}ngOnInit(){this.paginator.pageIndex=this.route.snapshot.queryParams.page||0,this.paginator.pageSize=this.route.snapshot.queryParams.size||10,this.paginator.page.next(null)}ngAfterViewInit(){this.statusSelect.value=this.route.snapshot.queryParams.status||"",this.filterInput.nativeElement.value=this.route.snapshot.queryParams.search||"",this.sort.sort({id:"id",start:"asc",disableClear:!1}),this.cdref.detectChanges(),(0,_.T)(this.sort.sortChange,this.paginator.page,(0,y.R)(this.filterInput.nativeElement,"keyup"),this.statusSelect.valueChange).pipe((0,P.x)(),(0,A.b)(500),(0,U.O)({}),(0,S.w)(()=>(this.store.dispatch(new p.z(!0)),this.loadData()))).subscribe()}loadData(){return this.pengurusTagihanService.getAllBills(this.paginator.pageIndex+1,this.paginator.pageSize,this.sort.active,this.sort.direction,this.filterInput.nativeElement.value,this.statusSelect.value,"false").pipe((0,f.U)(e=>(this.resultsLength=e.pagination.length,e.data)),(0,f.U)(e=>{setTimeout(()=>{this.filterInput.nativeElement.focus()},500),this.dataSource.data=e.map((l,s)=>(l.index=this.paginator.pageIndex>0?s+this.paginator.pageIndex*this.paginator.pageSize+1:s+1,l)),this.store.dispatch(new p.z(!1))}))}download(e){e.loading=!0,this.tagihanService.print(e.token).subscribe(l=>{this._FileSaverService.save(l,`Bukti Pembayaran ${e.universityName} ${this.datepipe.transform(e.lastStatusAt,"d MMMM y")} .pdf`,"pdf"),e.loading=!1},l=>{e.loading=!1})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.sBO),t.Y36(N.u),t.Y36(I.F),t.Y36(Y.yh),t.Y36(h.gz),t.Y36(Q.m9),t.Y36(u.uU))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-pengurus-tagihan"]],viewQuery:function(e,l){if(1&e&&(t.Gf(c.NW,7),t.Gf(m.YE,5),t.Gf(M,5),t.Gf(D,7)),2&e){let s;t.iGM(s=t.CRH())&&(l.paginator=s.first),t.iGM(s=t.CRH())&&(l.sort=s.first),t.iGM(s=t.CRH())&&(l.statusSelect=s.first),t.iGM(s=t.CRH())&&(l.filterInput=s.first)}},decls:42,vars:11,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayoutGap","32px"],["fxFlex","70%"],["matInput",""],["filterInput",""],["fxFlex","25%"],["placeholder","Status Pembayaran","name","status"],["matSelect",""],[3,"value"],[1,"mat-elevation-z8"],["matSort","",3,"dataSource"],["matColumnDef","index"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","members.university_name"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","amount"],["matColumnDef","last_status"],["matColumnDef","receipt"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length"],[1,"mobile-label"],["mat-sort-header",""],[4,"ngIf"],["class","pills",4,"ngIf"],["class","pills yellow",4,"ngIf"],["class","pills success",4,"ngIf"],["class","pills warn",4,"ngIf"],[1,"pills"],[1,"pills","yellow"],[1,"pills","success"],[1,"pills","warn"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px"],["color","accent",3,"diameter"],["for",""],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(e,l){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-form-field",1),t.TgZ(2,"mat-label"),t._uU(3,"Cari"),t.qZA(),t._UZ(4,"input",2,3),t.qZA(),t.TgZ(6,"mat-form-field",4),t.TgZ(7,"mat-select",5,6),t.TgZ(9,"mat-option",7),t._uU(10,"Tampilkan Semua"),t.qZA(),t.TgZ(11,"mat-option",7),t._uU(12,"Belum Bayar"),t.qZA(),t.TgZ(13,"mat-option",7),t._uU(14,"Menunggu Pembayaran"),t.qZA(),t.TgZ(15,"mat-option",7),t._uU(16,"Lunas"),t.qZA(),t.TgZ(17,"mat-option",7),t._uU(18,"Kadaluarsa"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",8),t.TgZ(20,"mat-table",9),t.ynx(21,10),t.YNc(22,B,2,0,"mat-header-cell",11),t.YNc(23,w,4,1,"mat-cell",12),t.BQk(),t.ynx(24,13),t.YNc(25,L,2,0,"mat-header-cell",14),t.YNc(26,z,3,1,"mat-cell",12),t.BQk(),t.ynx(27,15),t.YNc(28,O,2,0,"mat-header-cell",11),t.YNc(29,q,4,2,"mat-cell",12),t.BQk(),t.ynx(30,16),t.YNc(31,H,2,0,"mat-header-cell",11),t.YNc(32,R,4,3,"mat-cell",12),t.BQk(),t.ynx(33,17),t.YNc(34,b,2,0,"mat-header-cell",11),t.YNc(35,X,6,4,"mat-cell",12),t.BQk(),t.ynx(36,18),t.YNc(37,K,2,0,"mat-header-cell",11),t.YNc(38,tt,4,2,"mat-cell",12),t.BQk(),t.YNc(39,at,1,0,"mat-header-row",19),t.YNc(40,et,1,0,"mat-row",20),t.qZA(),t._UZ(41,"mat-paginator",21),t.qZA()),2&e&&(t.xp6(9),t.Q6J("value",""),t.xp6(2),t.Q6J("value",0),t.xp6(2),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(3),t.Q6J("dataSource",l.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",l.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(10,nt))("length",l.resultsLength))},directives:[r.xw,r.Wh,r.SQ,d.KE,r.yH,d.hX,T.Nt,x.gD,J.ey,o.BZ,m.YE,o.w1,o.fO,o.Dz,o.as,o.nj,c.NW,o.ge,o.ev,m.nU,u.O5,Z.$g,v.lW,o.XQ,o.Gk],pipes:[u.JJ],styles:[".mobile-label[_ngcontent-%COMP%]{display:none}@media (max-width: 600px){.mobile-label[_ngcontent-%COMP%]{width:80px;display:inline-block;font-weight:700}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{flex-direction:column;align-items:start;padding:8px 24px}}@media (min-width: 600px){.mat-column-index[_ngcontent-%COMP%]{flex:0 0 4%}.mat-column-members-university_name[_ngcontent-%COMP%]{flex:0 0 35%}}"]}),a})();var lt=i(9764),st=i(6688);const ot=[{path:"",component:it}];let ut=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[u.uU],imports:[[u.ez,h.Bz.forChild(ot),c.TU,o.p0,st.Hi,T.c,m.JX,lt.o9,x.LD,v.ot,Z.Cq]]}),a})()}}]);