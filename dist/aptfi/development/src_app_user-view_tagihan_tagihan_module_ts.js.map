{"version":3,"file":"src_app_user-view_tagihan_tagihan_module_ts.js","mappings":"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","sources":["./src/app/user-view/tagihan/tagihan.component.ts","./src/app/user-view/tagihan/tagihan.component.html","./src/app/user-view/tagihan/tagihan.module.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Store } from '@ngxs/store';\nimport { FileSaverService } from 'ngx-filesaver';\nimport { finalize } from 'rxjs/operators';\nimport { SetLoadingState } from 'src/app/states/loading.state';\nimport { Bill } from './bill.model';\nimport { TagihanService } from './tagihan.service';\n\ndeclare const window: any;\n\n@Component({\n  selector: 'app-tagihan',\n  templateUrl: './tagihan.component.html',\n  styleUrls: ['./tagihan.component.scss'],\n})\nexport class TagihanComponent implements OnInit {\n  bills: Bill[];\n\n  constructor(\n    private tagihanService: TagihanService,\n    private _FileSaverService: FileSaverService,\n    private store: Store // private cdr: ChangeDetectorRef\n  ) {\n    this.store.dispatch(new SetLoadingState(true));\n    this.getBills();\n  }\n\n  ngOnInit(): void {}\n\n  getBills() {\n    this.tagihanService\n      .getOrder()\n      .pipe(\n        finalize(() => {\n          this.store.dispatch(new SetLoadingState(false));\n        })\n      )\n      .subscribe((response) => {\n        this.bills = response.bills;\n      });\n  }\n\n  onPayButtonClick(bill: Bill) {\n    // check status\n    this.tagihanService.check(bill.orderId).subscribe((response) => {\n      this.getBills();\n    });\n    window.snap.pay(bill.token);\n  }\n\n  onPrintClick(bill: Bill) {\n    bill.loading = true;\n    this.tagihanService.printReceipt(bill.token).subscribe(\n      (response) => {\n        this._FileSaverService.save(response, 'Bukti Pembayaran.pdf', 'pdf');\n        bill.loading = false;\n      },\n\n      (err) => {\n        bill.loading = false;\n      }\n    );\n  }\n\n  onRetryClick(bill: Bill) {\n    bill.loading = true;\n    this.tagihanService.retry(bill.token).subscribe(\n      (response) => {\n        window.snap.pay(response.bill.token, {\n          onClose: () => {\n            this.getBills();\n          },\n        });\n        bill.loading = false;\n      },\n      (err) => {\n        bill.loading = false;\n      }\n    );\n  }\n}\n","<div>\n  <div fxLayout=\"row wrap\" fxLayoutAlign=\"start start\" fxLayoutGap=\"16px\">\n    <mat-card *ngFor=\"let bill of bills\" fxFlex.lg=\"20%\" fxFlex.md=\"45%\" fxFlex.sm=\"45%\" style=\"margin-top: 8px\">\n      <mat-card-header fxLayout=\"row\" fxLayoutAlign=\"center center\">\n        <mat-card-title *ngIf=\"bill.type === 'annual'\">Iuran Anggota Tahun {{ bill.year }}</mat-card-title>\n        <mat-card-title *ngIf=\"bill.type === 'register'\">Biaya Pendaftaran Anggota</mat-card-title>\n      </mat-card-header>\n      <mat-card-content>\n        <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" fxLayoutGap=\"8px\" style=\"padding-bottom: 8px\">\n          <div *ngIf=\"bill.lastStatus === 0\" fxLayout=\"row\" fxLayoutAlign=\"start center\" fxLayoutGap=\"8px\">\n            <mat-icon style=\"color: #ddd\">fiber_manual_record</mat-icon>\n            <label for=\"\">Belum dibayar</label>\n          </div>\n          <div *ngIf=\"bill.lastStatus === 1\" fxLayout=\"row\" fxLayoutAlign=\"start center\" fxLayoutGap=\"8px\">\n            <mat-icon style=\"color: #ffc957\">fiber_manual_record</mat-icon>\n            <label for=\"\">Menunggu pembayaran</label>\n          </div>\n          <div *ngIf=\"bill.lastStatus === 2\" fxLayout=\"row\" fxLayoutAlign=\"start center\" fxLayoutGap=\"8px\">\n            <mat-icon style=\"color: #b9ea81\">fiber_manual_record</mat-icon>\n            <label for=\"\">Lunas</label>\n          </div>\n          <div *ngIf=\"bill.lastStatus === 3\" fxLayout=\"row\" fxLayoutAlign=\"start center\" fxLayoutGap=\"8px\">\n            <mat-icon style=\"color: #ea5455\">fiber_manual_record</mat-icon>\n            <label for=\"\">Pembayaran Kadaluarsa</label>\n          </div>\n          <div>\n            {{ bill.lastStatusAt | date: \"short\" }}\n          </div>\n        </div>\n        <mat-divider> </mat-divider>\n        <div style=\"padding: 8px\" fxLayout=\"column\" fxLayoutAlign=\"start stretch\">\n          <div fxLayout=\"row\" fxLayoutAlign=\"start center\" fxLayoutGap=\"8px\" style=\"padding: 8px 0\">\n            <label for=\"\">ID Transaksi</label>\n            <strong>{{ bill.token.substr(24, 12) }}</strong>\n          </div>\n\n          <div style=\"margin: 8px 0\" fxLayout=\"column\" fxLayoutAlign=\"start stretch\" fxLayoutGap=\"8px\">\n            <strong style=\"color: #ccc; text-transform: uppercase\">Pembayaran</strong>\n            <label *ngIf=\"bill.type === 'register'\" style=\"font-size: 20px\">Pendaftaran Anggota</label>\n            <label *ngIf=\"bill.type === 'annual'\" style=\"font-size: 20px\">Iuran Tahunan ({{ bill.year }})</label>\n          </div>\n          <div style=\"margin: 8px 0\" fxLayout=\"column\" fxLayoutAlign=\"start stretch\" fxLayoutGap=\"8px\">\n            <strong style=\"color: #ccc; text-transform: uppercase\">Nominal</strong>\n            <label style=\"font-size: 20px\">Rp. {{ bill.amount + bill.fee | number }}</label>\n          </div>\n          <div style=\"margin: 8px 0\" fxLayout=\"column\" fxLayoutAlign=\"start stretch\" fxLayoutGap=\"8px\">\n            <strong style=\"color: #ccc; text-transform: uppercase\">Nama Institusi</strong>\n            <label style=\"font-size: 20px\">{{ bill.member.universityName }}</label>\n          </div>\n        </div>\n      </mat-card-content>\n      <mat-card-actions>\n        <mat-divider> </mat-divider>\n        <div style=\"padding-top: 8px\" fxLayout=\"row\" fxLayoutAlign=\"center center\">\n          <div *ngIf=\"bill.loading\" fxLayout=\"row\" fxLayoutAlign=\"center center\" fxLayoutGap=\"8px\">\n            <mat-spinner color=\"primary\" [diameter]=\"20\"></mat-spinner>\n            <label for=\"\">Loading</label>\n          </div>\n          <button\n            *ngIf=\"bill.lastStatus === 0 || bill.lastStatus === 1\"\n            mat-flat-button\n            color=\"accent\"\n            (click)=\"onPayButtonClick(bill)\"\n          >\n            <mat-icon>credit_card</mat-icon>\n            Bayar Sekarang\n          </button>\n          <button\n            *ngIf=\"bill.lastStatus === 3 && !bill.loading\"\n            mat-flat-button\n            color=\"accent\"\n            (click)=\"onRetryClick(bill)\"\n          >\n            <mat-icon>credit_card</mat-icon>\n            Bayar Sekarang\n          </button>\n          <button\n            *ngIf=\"bill.lastStatus === 2 && !bill.loading\"\n            (click)=\"onPrintClick(bill)\"\n            mat-flat-button\n            color=\"accent\"\n          >\n            <mat-icon>receipt</mat-icon>\n            Cetak Bukti Bayar\n          </button>\n        </div>\n      </mat-card-actions>\n    </mat-card>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TagihanComponent } from './tagihan.component';\nimport { RouterModule, Routes } from '@angular/router';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatButtonModule } from '@angular/material/button';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TagihanComponent,\n  },\n];\n\n@NgModule({\n  declarations: [TagihanComponent],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    MatCardModule,\n    MatButtonModule,\n    FlexLayoutModule,\n    MatIconModule,\n    MatDividerModule,\n    MatProgressSpinnerModule,\n  ],\n})\nexport class TagihanModule {}\n"],"names":[],"sourceRoot":"webpack:///"}